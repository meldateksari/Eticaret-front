<!-- ðŸ§­ Kategori Listesi -->
<section class="category">
  <ul>
    <li *ngFor="let c of categories">
      <a [routerLink]="['/products']" [queryParams]="{ categoryId: c.id }">
        {{ c.name }}
      </a>
    </li>
  </ul>
</section>
<section class="latest" *ngIf="latestProducts.length">
  <h2>New Arrivals</h2>

  <div class="swiper" #swiperRef>
    <div class="swiper-wrapper">
      <div class="swiper-slide" *ngFor="let p of latestProducts">
        <div class="slide-link">
          <a [routerLink]="['/product', p.id]">
            <div class="slide-content">
              <!-- Favori Butonu -->
              <button class="favorite-icon" (click)="addProductToWishlist(p, $event)">
                <!-- SVG -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px"
                     fill="currentColor" viewBox="0 0 256 256">
                  <path
                    d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.61,146.24,196.15,128,206.8Z">
                  </path>
                </svg>
              </button>

              <img [src]="p.imageUrl" [alt]="p.name" />
              <div class="info">
                <h3>{{ p.name }}</h3>
                <p>{{ p.description }}</p>
                <span>{{ p.price | currency:'TRY' }}</span>
              </div>
            </div>
          </a>

          <!-- âœ… Sepete Ekle Butonu dÄ±ÅŸarÄ±da -->
          <button
            class="add-to-bag-button flex items-center justify-center gap-2 w-full max-w-[280px] px-6 py-4 text-sm font-semibold uppercase tracking-wide transition-all duration-300 rounded-md bg-black text-white hover:bg-white hover:text-black hover:border hover:border-black active:scale-95 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed"
            (click)="addToCart(p); $event.stopPropagation(); $event.preventDefault()"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.3 5.2a1 1 0 001 .8h11.4a1 1 0 001-.8L17 13M7 13H5.4M9 21a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z" />
            </svg>
            Add to Cart
          </button>
        </div>
      </div>
    </div>

    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-pagination"></div>
  </div>
</section>


<!-- ðŸ“¦ TÃ¼m ÃœrÃ¼nler -->
<section class="grid">
  <h2>All Products</h2>

  <div class="cards">
    <div *ngFor="let p of allProducts" class="card-link">
      <article>
        <div class="img-wrapper">
          <!-- Favori Butonu -->
          <button class="favorite-icon" (click)="addProductToWishlist(p, $event)">
            <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px"
                 fill="currentColor" viewBox="0 0 256 256">
              <path
                d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.61,146.24,196.15,128,206.8Z">
              </path>
            </svg>
          </button>

          <a [routerLink]="['/product', p.id]">
            <img [src]="p.imageUrl" [alt]="p.name" loading="lazy" />
          </a>
        </div>
        <h4>{{ p.name }}</h4>
        <span class="price">{{ p.price | currency:'TRY' }}</span>
        <button
          class="add-to-bag-button flex items-center justify-center gap-2 w-full max-w-[280px] px-6 py-4 text-sm font-semibold uppercase tracking-wide transition-all duration-300 rounded-md bg-black text-white hover:bg-white hover:text-black hover:border hover:border-black active:scale-95 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed"
          (click)="addToCart(p); $event.stopPropagation(); $event.preventDefault()"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.3 5.2a1 1 0 001 .8h11.4a1 1 0 001-.8L17 13M7 13H5.4M9 21a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z" />
          </svg>
          Add to Cart
        </button>
      </article>
    </div>
  </div>
</section>


