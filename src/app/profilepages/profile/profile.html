<html>
<head>
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
  <link
    rel="stylesheet"
    as="style"
    onload="this.rel='stylesheet'"
    href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800"
  />

  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>
<body>
<div class="relative flex size-full min-h-screen flex-col bg-[#fbf9f9] group/design-root overflow-x-hidden" style='font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;'>
  <div class="layout-container flex h-full grow flex-col">
    <div class="gap-1 px-6 flex flex-1 justify-center py-5">
      <div class="layout-content-container flex flex-col w-80">
        <div class="flex h-full min-h-[700px] flex-col justify-between bg-[#fbf9f9] p-4">
          <div class="flex flex-col gap-4">
            <div class="flex flex-col gap-2">
              <div class="flex items-center gap-3 px-3 py-2 rounded-xl bg-[#f1e9ea]">
                <div class="text-[#191011]" data-icon="User" data-size="24px" data-weight="fill">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M230.93,220a8,8,0,0,1-6.93,4H32a8,8,0,0,1-6.92-12c15.23-26.33,38.7-45.21,66.09-54.16a72,72,0,1,1,73.66,0c27.39,8.95,50.86,27.83,66.09,54.16A8,8,0,0,1,230.93,220Z"
                    ></path>
                  </svg>
                </div>
                <a routerLink="/account" routerLinkActive="bg-[#e3d4d5]" class="px-3 py-2 rounded-xl">My Account</a>
              </div>
              <div class="flex items-center gap-3 px-3 py-2">
                <div class="text-[#191011]" data-icon="Package" data-size="24px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M223.68,66.15,135.68,18a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32l80.34,44-29.77,16.3-80.35-44ZM128,120,47.66,76l33.9-18.56,80.34,44ZM40,90l80,43.78v85.79L40,175.82Zm176,85.78h0l-80,43.79V133.82l32-17.51V152a8,8,0,0,0,16,0V107.55L216,90v85.77Z"
                    ></path>
                  </svg>
                </div>
                <a routerLink="/orders" routerLinkActive="bg-[#e3d4d5]" class="px-3 py-2 rounded-xl">My Orders</a>

              </div>
              <div class="flex items-center gap-3 px-3 py-2">
                <div class="text-[#191011]" data-icon="MapPin" data-size="24px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M128,64a40,40,0,1,0,40,40A40,40,0,0,0,128,64Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,128Zm0-112a88.1,88.1,0,0,0-88,88c0,31.4,14.51,64.68,42,96.25a254.19,254.19,0,0,0,41.45,38.3,8,8,0,0,0,9.18,0A254.19,254.19,0,0,0,174,200.25c27.45-31.57,42-64.85,42-96.25A88.1,88.1,0,0,0,128,16Zm0,206c-16.53-13-72-60.75-72-118a72,72,0,0,1,144,0C200,161.23,144.53,209,128,222Z"
                    ></path>
                  </svg>
                </div>
                <a routerLink="/addresses" routerLinkActive="bg-[#e3d4d5]" class="px-3 py-2 rounded-xl">My Addresses</a>

              </div>
              <div class="flex items-center gap-3 px-3 py-2">
                <div class="text-[#191011]" data-icon="ArrowCounterClockwise" data-size="24px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M224,128a96,96,0,0,1-94.71,96H128A95.38,95.38,0,0,1,62.1,197.8a8,8,0,0,1,11-11.63A80,80,0,1,0,71.43,71.39a3.07,3.07,0,0,1-.26.25L44.59,96H72a8,8,0,0,1,0,16H24a8,8,0,0,1-8-8V56a8,8,0,0,1,16,0V85.8L60.25,60A96,96,0,0,1,224,128Z"
                    ></path>
                  </svg>
                </div>
                <a routerLink="/returns" routerLinkActive="bg-[#e3d4d5]" class="px-3 py-2 rounded-xl">My Returns</a>
              </div>
              <div class="flex items-center gap-3 px-3 py-2">
                <div class="text-[#191011]" data-icon="Heart" data-size="24px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.61,146.24,196.15,128,206.8Z"
                    ></path>
                  </svg>
                </div>
                <a routerLink="/wishlist" routerLinkActive="bg-[#e3d4d5]" class="px-3 py-2 rounded-xl">My Wishlist</a>
              </div>
              <div class="flex items-center gap-3 px-3 py-2">
                <div class="text-[#191011]" data-icon="Gear" data-size="24px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"
                    ></path>
                  </svg>
                </div>
                <a routerLink="/settings" routerLinkActive="bg-[#e3d4d5]" class="px-3 py-2 rounded-xl">Settings</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Main content -->
      <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
        <div class="flex flex-wrap justify-between gap-3 p-4">
          <p class="text-[#191011] tracking-light text-[32px] font-bold leading-tight min-w-72">
            Profile | My Account
          </p>
        </div>

        <!-- Account Details -->
        <h3 class="text-[#191011] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">
          Account Details
        </h3>

        <form [formGroup]="profileFormValue" (ngSubmit)="updateAccount()" *ngIf="profileFormValue">
          <!-- First Name -->
          <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
            <label class="flex flex-col min-w-40 flex-1">
              <p class="pb-2 text-[#191011] text-base font-medium">Name</p>
              <input
                formControlName="firstName"
                class="form-input w-full rounded-xl border border-[#e3d4d5] bg-[#fbf9f9] h-14 p-[15px] text-base text-[#191011] placeholder:text-[#8b5b5d] focus:border-[#e3d4d5] focus:outline-0"
                placeholder="Enter your first name (optional)"
              />
              <div
                *ngIf="profileFormValue.get('firstName')?.invalid && profileFormValue.get('firstName')?.touched"
                class="text-red-500 text-sm mt-1"
              >
                <span *ngIf="profileFormValue.get('firstName')?.errors?.['minlength']">
                  Name must be at least 2 characters
                </span>
              </div>
            </label>
          </div>

          <!-- Last Name -->
          <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
            <label class="flex flex-col min-w-40 flex-1">
              <p class="pb-2 text-[#191011] text-base font-medium">Surname</p>
              <input
                formControlName="lastName"
                class="form-input w-full rounded-xl border border-[#e3d4d5] bg-[#fbf9f9] h-14 p-[15px] text-base text-[#191011] placeholder:text-[#8b5b5d] focus:border-[#e3d4d5] focus:outline-0"
                placeholder="Enter your last name (optional)"
              />
              <div
                *ngIf="profileFormValue.get('lastName')?.invalid && profileFormValue.get('lastName')?.touched"
                class="text-red-500 text-sm mt-1"
              >
                <span *ngIf="profileFormValue.get('lastName')?.errors?.['minlength']">
                  Surname must be at least 2 characters
                </span>
              </div>
            </label>
          </div>

          <!-- Email -->
          <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
            <label class="flex flex-col min-w-40 flex-1">
              <p class="pb-2 text-[#191011] text-base font-medium">Email</p>
              <input
                formControlName="email"
                type="email"
                class="form-input w-full rounded-xl border border-[#e3d4d5] bg-[#fbf9f9] h-14 p-[15px] text-base text-[#191011] placeholder:text-[#8b5b5d] focus:border-[#e3d4d5] focus:outline-0"
                placeholder="Enter your email (optional)"
              />
              <div
                *ngIf="profileFormValue.get('email')?.invalid && profileFormValue.get('email')?.touched"
                class="text-red-500 text-sm mt-1"
              >
                <span *ngIf="profileFormValue.get('email')?.errors?.['email']">Please enter a valid email</span>
              </div>
            </label>
          </div>

          <!-- Profile Photo Upload -->
          <div class="flex max-w-[480px] flex-col gap-4 px-4 py-3">
            <p class="text-[#191011] text-base font-medium">Profile Photo</p>

            <!-- Image Preview -->
            <div *ngIf="imageUrl" class="mb-3">
<!--              <img [src]="imageUrl" alt="Profile Image" class="w-32 h-32 rounded-full object-cover border" />-->
              <img src="data:image/jpeg;base64,{{(userO | async)?.image}}" alt="Profile Image">

            </div>

            <!-- PrimeNG File Upload -->
            <p-fileUpload
              name="file"
              customUpload="true"
              accept="image/*"
              chooseLabel="Select Image"
              (uploadHandler)="uploadProfileImage($event)"
              auto
              [showUploadButton]="false"
              [showCancelButton]="false"
            ></p-fileUpload>
          </div>


          <!-- Phone Number -->
          <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
            <label class="flex flex-col min-w-40 flex-1">
              <p class="pb-2 text-[#191011] text-base font-medium">Phone Number</p>
              <input
                formControlName="phoneNumber"
                type="tel"
                class="form-input w-full rounded-xl border border-[#e3d4d5] bg-[#fbf9f9] h-14 p-[15px] text-base text-[#191011] placeholder:text-[#8b5b5d] focus:border-[#e3d4d5] focus:outline-0"
                placeholder="Enter your phone number (optional)"
              />
              <div
                *ngIf="profileFormValue.get('phoneNumber')?.invalid && profileFormValue.get('phoneNumber')?.touched"
                class="text-red-500 text-sm mt-1"
              >
                <span *ngIf="profileFormValue.get('phoneNumber')?.errors?.['pattern']">
                  Please enter a valid phone number (10-11 digits)
                </span>
              </div>
            </label>
          </div>

          <!-- Buttons -->
          <div class="flex px-4 py-3 gap-4 justify-start">
            <button
              type="submit"

              class="min-w-[120px] h-10 px-4 rounded-xl text-sm font-bold text-[#191011] bg-[#e8b4b7] hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Update Account
            </button>

            <button
              type="button"
              (click)="deleteAccount()"
              class="min-w-[120px] h-10 px-4 rounded-xl text-sm font-bold text-white bg-[#e53935] hover:bg-red-600"
            >
              Delete Account
            </button>
          </div>
        </form>

        <!-- Password Change -->
        <h3 class="text-[#191011] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">
          Password
        </h3>

        <form [formGroup]="passwordFormValue" (ngSubmit)="changePassword()" *ngIf="passwordFormValue">
          <!-- Current Password -->
          <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
            <label class="flex flex-col min-w-40 flex-1">
              <p class="pb-2 text-[#191011] text-base font-medium">Current Password</p>
              <input
                formControlName="currentPassword"
                type="password"
                placeholder="Enter current password"
                class="form-input w-full rounded-xl border border-[#e3d4d5] bg-[#fbf9f9] h-14 p-[15px] text-base text-[#191011] placeholder:text-[#8b5b5d] focus:border-[#e3d4d5] focus:outline-0"
              />
              <div
                *ngIf="passwordFormValue.get('currentPassword')?.invalid && passwordFormValue.get('currentPassword')?.touched"
                class="text-red-500 text-sm mt-1"
              >
                <span *ngIf="passwordFormValue.get('currentPassword')?.errors?.['required']">Current password is required</span>
              </div>
            </label>
          </div>

          <!-- New Password -->
          <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
            <label class="flex flex-col min-w-40 flex-1">
              <p class="pb-2 text-[#191011] text-base font-medium">New Password</p>
              <input
                formControlName="newPassword"
                type="password"
                placeholder="Enter new password"
                class="form-input w-full rounded-xl border border-[#e3d4d5] bg-[#fbf9f9] h-14 p-[15px] text-base text-[#191011] placeholder:text-[#8b5b5d] focus:border-[#e3d4d5] focus:outline-0"
              />
              <div
                *ngIf="passwordFormValue.get('newPassword')?.invalid && passwordFormValue.get('newPassword')?.touched"
                class="text-red-500 text-sm mt-1"
              >
                <span *ngIf="passwordFormValue.get('newPassword')?.errors?.['required']">New password is required</span>
                <span *ngIf="passwordFormValue.get('newPassword')?.errors?.['minlength']">Password must be at least 6 characters</span>
              </div>
            </label>
          </div>

          <!-- Confirm Password -->
          <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
            <label class="flex flex-col min-w-40 flex-1">
              <p class="pb-2 text-[#191011] text-base font-medium">Confirm New Password</p>
              <input
                formControlName="confirmPassword"
                type="password"
                placeholder="Confirm new password"
                class="form-input w-full rounded-xl border border-[#e3d4d5] bg-[#fbf9f9] h-14 p-[15px] text-base text-[#191011] placeholder:text-[#8b5b5d] focus:border-[#e3d4d5] focus:outline-0"
              />
              <div
                *ngIf="passwordFormValue.get('confirmPassword')?.invalid && passwordFormValue.get('confirmPassword')?.touched"
                class="text-red-500 text-sm mt-1"
              >
                <span *ngIf="passwordFormValue.get('confirmPassword')?.errors?.['required']">Please confirm your password</span>
              </div>
              <div
                *ngIf="passwordFormValue.hasError('mismatch') && passwordFormValue.get('confirmPassword')?.touched"
                class="text-red-500 text-sm mt-1"
              >
                <span>Passwords do not match</span>
              </div>
            </label>
          </div>

          <!-- Submit -->
          <div class="flex px-4 py-3 justify-start">
            <button
              type="submit"

              class="min-w-[120px] h-10 px-4 rounded-xl text-sm font-bold text-[#191011] bg-[#e8b4b7] hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Change Password
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>




</body>
</html>
