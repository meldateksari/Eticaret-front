<!-- src/app/pages/dashboard/dashboard.html -->
<div class="flex min-h-screen bg-white" style='font-family: "Be Vietnam Pro", "Noto Sans", sans-serif;'>
  <app-adminpages-sidebar class="shrink-0 w-72 border-r border-[#f0f2f5]"></app-adminpages-sidebar>

  <main class="flex-1 min-w-0 flex flex-col overflow-x-hidden">
    <div class="px-6 lg:px-10 py-6 page-pads">
      <div class="layout-content-container flex flex-col max-w-[1120px] mx-auto flex-1">

        <!-- Ãœst Kartlar -->
        <section class="section">
          <ng-container *ngIf="vm$ | async as vm; else loading">
            <div class="top-grid">
              <div class="card">
                <p class="stat-title text-base">Total Sales</p>
                <p class="stat-value text-2xl">{{ vm.totalSales | currency:'USD':'symbol':'1.0-0' }}</p>
              </div>
              <div class="card">
                <p class="stat-title text-base">New Customers</p>
                <p class="stat-value text-2xl">{{ vm.totalUsers }}</p>
              </div>
              <div class="card">
                <p class="stat-title text-base">Stock Status</p>
                <p class="stat-value text-2xl">{{ vm.stockAvailabilityPercent }}%</p>
                <p class="subtle text-sm">Total stock qty: {{ vm.totalStockQuantity | number }}</p>
              </div>
            </div>
          </ng-container>
          <ng-template #loading>
            <div class="top-grid"><div class="skel"></div><div class="skel"></div><div class="skel"></div></div>
          </ng-template>
        </section>

        <!-- Sales Split (Pie) -->
        <section class="section">
          <h2 class="section-title text-[#111518] text-[22px] font-bold">Sales Split</h2>
          <div class="card flex flex-col items-center py-4">
            <p class="text-[#111518] text-base font-medium mb-3">Revenue Distribution</p>
            <p-chart
              type="pie"
              [data]="(salesSplitData$ | async)!"
              [options]="salesSplitOptions"
              class="w-full md:w-[30rem]">
            </p-chart>
          </div>
        </section>

        <!-- Sales by Product (Bar) -->
        <section class="section">
          <h2 class="section-title text-[#111518] text-[22px] font-bold">Sales by Product</h2>
          <div class="chart-card">
            <p class="text-[#111518] text-base font-medium mb-3">Total Sales by Product</p>
            <div class="chart-wrap">
              <p-chart
                type="bar"
                [data]="(salesByProductData$ | async)!"
                [options]="salesByProductOptions"
                style="display:block; width:100%; height:100%;">
              </p-chart>
            </div>
          </div>
        </section>



        <!-- Stock Levels (dinamik) -->
        <section class="section">
          <h2 class="section-title text-[#111518] text-[22px] font-bold">Stock Levels</h2>
          <div class="card">
            <ng-container *ngIf="stockLevels$ | async as sl; else slSkeleton">
              <div class="flex items-baseline gap-2">
                <p class="text-[#111518] text-[28px] font-bold">{{ sl.currentPct | number:'1.0-0' }}%</p>
                <div class="flex gap-2">
                  <p class="subtle text-base">Current</p>
                  <p
                    class="text-base font-medium"
                    [ngClass]="sl.isPositive ? 'text-[#078838]' : 'text-[#e73908]'">
                    {{ sl.isPositive ? '+' : '' }}{{ sl.changePct | number:'1.0-0' }}%
                  </p>
                </div>
              </div>
            </ng-container>
            <ng-template #slSkeleton>
              <div class="h-8 bg-[#f3f4f6] rounded w-32"></div>
            </ng-template>
          </div>
        </section>


      </div>
    </div>
  </main>
</div>
